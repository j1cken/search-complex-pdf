# Elastic search-complex-pdf (ColPali) summarize result with Google Gemini

This project allows you to extract JPEG files from a selected PDF document, index them in Elasticsearch using ColPali, and perform natural language searches on the indexed data using ColPali. 
The search results include the 5 pages of the PDF document that best match the search criteria, along with a summary of the content generated by Google Gemini.

## Installation

To get started, install the necessary dependencies:

```
pip install git+https://github.com/illuin-tech/colpali.git elasticsearch PyMuPDF Pillow Flask colpali-engine dotenv
```

Edit the elastic.env file, required are the Elasticsearch serverless URL, api-kep, pdf directory + filename, the Elastic index to be created and the Google Gemini API key.
- elastic_url = "url"
- elastic_api = "api-key>"
- pdf-path = "full directory plus file name .pdf"
- index-name = "Elastic index"
- google_api_key = "Gemini API key" 

To retrieve the Gemini API key use: https://aistudio.google.com/app/apikey?hl=de&_gl=1*1rimff4*_ga*MjExMTA1MjIxLjE3NDQwMTI3NzU.*_ga_P1DBVKWT6V*MTc0NDEwODM4Ni40LjEuMTc0NDEwODQwNy4wLjAuMTEzODcyMzI4

```
vi elastic.env
```

## Step-by-Step Guide

### Step 1: Extract JPEG Files from PDF

Execute the script to extract JPEG files:

```
python extractpdf.py
```

### Step 2: Index JPEG Files in Elasticsearch

Execute the script to index the JPEG files:

```
python indexjpegwithcolpali.py
```

### Step 3: Search the Document

Execute the script to start the search application:

```
python searchapp.py
```

Access the search application at:

```
http://127.0.0.1:5000
```

## Notes

- Ensure your Elasticsearch serverless deployment is properly configured and accessible.
- Replace placeholders (`<PDF path and filename>`, `<index>`, `<url>`, `<api>`) with actual values specific to your setup.
